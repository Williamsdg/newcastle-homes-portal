(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{9184:function(e,t,s){Promise.resolve().then(s.bind(s,9818))},9818:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),l=s(1396),c=s.n(l),r=s(2265);function n(e){let{rating:t,onRate:s,readonly:l=!1}=e,[c,n]=(0,r.useState)(0);return(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",disabled:l,onClick:()=>null==s?void 0:s(e),onMouseEnter:()=>!l&&n(e),onMouseLeave:()=>!l&&n(0),className:"".concat(l?"cursor-default":"cursor-pointer hover:scale-110"," transition-transform"),children:(0,a.jsx)("svg",{className:"w-5 h-5 ".concat((c||t)>=e?"text-amber-400 fill-amber-400":"text-slate-300 fill-slate-300"),viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e)),t>0&&(0,a.jsxs)("span",{className:"ml-2 text-sm font-medium text-charcoal-light",children:[t,"/5"]})]})}function i(e){let{contractor:t,onClose:s,onSave:l}=e,[c,i]=(0,r.useState)(t.rating),[o,d]=(0,r.useState)(t.review);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-strong max-w-lg w-full",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate",children:[(0,a.jsx)("h3",{className:"text-lg font-heading font-semibold text-charcoal",children:"Rate & Review Contractor"}),(0,a.jsxs)("p",{className:"text-sm text-charcoal-light mt-1",children:[t.role," - ",t.company]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Rating"}),(0,a.jsx)(n,{rating:c,onRate:i}),(0,a.jsx)("p",{className:"text-xs text-charcoal-light mt-1",children:"Click stars to rate (1-5)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Review / Notes"}),(0,a.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Add notes about contractor performance, quality of work, punctuality, communication...",className:"w-full px-4 py-3 border border-slate rounded-lg focus:outline-none focus:ring-2 focus:ring-newcastle/20 focus:border-newcastle resize-none",rows:4}),(0,a.jsx)("p",{className:"text-xs text-charcoal-light mt-1",children:"This review helps determine whether to use this contractor on future projects."})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-slate flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:s,className:"btn-outline py-2 px-4 text-sm",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>l(c,o),className:"btn-primary py-2 px-4 text-sm",children:"Save Review"})]})]})})}function o(e){let{property:t,constructionPhases:s}=e,[l,o]=(0,r.useState)(null),[d,x]=(0,r.useState)([t.currentPhase]),h=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},m={COMPLETED:"bg-green-100 text-green-700",IN_PROGRESS:"bg-newcastle-100 text-newcastle-700",PENDING:"bg-slate-100 text-slate-600",NOT_NEEDED:"bg-slate-100 text-slate-400",DELIVERED:"bg-purple-100 text-purple-700"},u={APPROVED:"bg-green-100 text-green-700",PENDING:"bg-amber-100 text-amber-700",DENIED:"bg-red-100 text-red-700"},p=e=>e>=4?"text-green-600 bg-green-50":e>=3?"text-amber-600 bg-amber-50":e>=1?"text-red-600 bg-red-50":"text-slate-400 bg-slate-50";return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(c(),{href:"/dashboard/properties",className:"text-newcastle hover:text-accent text-sm font-medium flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to All Properties"]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-soft p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-heading font-bold text-charcoal",children:t.address}),(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat({ON_TRACK:"bg-green-100 text-green-700",DELAYED:"bg-red-100 text-red-700",AHEAD:"bg-newcastle-100 text-newcastle-700",PAUSED:"bg-amber-100 text-amber-700"}[t.status]),children:{ON_TRACK:"On Track",DELAYED:"Delayed",AHEAD:"Ahead",PAUSED:"Paused"}[t.status]})]}),(0,a.jsxs)("p",{className:"text-charcoal-light",children:[t.community," • ",t.lot," • ",t.floorPlan]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-charcoal-light",children:[(0,a.jsxs)("span",{children:[t.bedrooms," Bedrooms"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[t.bathrooms," Bathrooms"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[t.sqft.toLocaleString()," sqft"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"btn-outline py-2 px-4 text-sm",children:"Edit Property"}),(0,a.jsx)("button",{className:"btn-primary py-2 px-4 text-sm",children:"Update Progress"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-charcoal",children:"Overall Progress"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-charcoal",children:[t.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-light rounded-full h-3",children:(0,a.jsx)("div",{className:"h-3 rounded-full bg-newcastle transition-all",style:{width:"".concat(t.progress,"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 pt-6 border-t border-slate",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-light rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-charcoal-light uppercase tracking-wider mb-2",children:"Project Manager"}),(0,a.jsx)("p",{className:"font-semibold text-charcoal",children:t.projectManager.name}),(0,a.jsx)("a",{href:"tel:".concat(t.projectManager.phone),className:"text-sm text-newcastle hover:text-accent",children:t.projectManager.phone})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-light rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-charcoal-light uppercase tracking-wider mb-2",children:"Builder's Agent"}),(0,a.jsx)("p",{className:"font-semibold text-charcoal",children:t.buildersAgent.name}),(0,a.jsx)("a",{href:"tel:".concat(t.buildersAgent.phone),className:"text-sm text-newcastle hover:text-accent",children:t.buildersAgent.phone})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-light rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-charcoal-light uppercase tracking-wider mb-2",children:"Buyer's Agent"}),t.buyersAgent?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-semibold text-charcoal",children:t.buyersAgent.name}),(0,a.jsx)("a",{href:"tel:".concat(t.buyersAgent.phone),className:"text-sm text-newcastle hover:text-accent",children:t.buyersAgent.phone})]}):(0,a.jsx)("p",{className:"text-charcoal-light italic",children:"Not assigned"})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-light rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-charcoal-light uppercase tracking-wider mb-2",children:"Buyer"}),t.buyer?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"font-semibold text-charcoal",children:t.buyer.name}),(0,a.jsx)("a",{href:"tel:".concat(t.buyer.phone),className:"text-sm text-newcastle hover:text-accent",children:t.buyer.phone})]}):(0,a.jsx)("p",{className:"text-charcoal-light italic",children:"No buyer yet"})]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>{let s=e.num===t.currentPhase,l=e.num<t.currentPhase,c=d.includes(e.num),r=e.contractors.filter(e=>e.rating>0),i=r.length>0?(r.reduce((e,t)=>e+t.rating,0)/r.length).toFixed(1):null;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-soft overflow-hidden ".concat(s?"ring-2 ring-newcastle":""),children:[(0,a.jsx)("button",{onClick:()=>h(e.num),className:"w-full p-5 ".concat(s?"bg-newcastle text-white":l?"bg-green-50":"bg-slate-light"," text-left"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(s?"bg-white text-newcastle":l?"bg-green-500 text-white":"bg-slate text-charcoal-light"),children:l?"✓":e.num}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"font-heading font-semibold ".concat(s?"text-white":"text-charcoal"),children:["Phase ",e.num,": ",e.name]}),(0,a.jsx)("p",{className:"text-sm ".concat(s?"text-white/80":"text-charcoal-light"),children:l?"Completed":s?"In Progress":"Upcoming"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,a.jsxs)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat(s?"bg-white/20 text-white":p(parseFloat(i))),children:["Avg: ",i,"/5"]}),(0,a.jsxs)("span",{className:"px-3 py-1 text-xs font-medium rounded-full ".concat(s?"bg-white/20 text-white":l?"bg-green-100 text-green-700":"bg-slate text-charcoal-light"),children:[e.photos," Photos"]}),(0,a.jsx)("svg",{className:"w-5 h-5 transition-transform ".concat(c?"rotate-180":""," ").concat(s?"text-white":"text-charcoal-light"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),c&&(0,a.jsxs)("div",{className:"p-5",children:[e.permits&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-charcoal uppercase tracking-wider mb-3",children:"Permits & Approvals"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-3",children:e.permits.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-slate-light rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-charcoal text-sm",children:e.name}),e.number&&(0,a.jsx)("p",{className:"text-xs text-charcoal-light",children:e.number})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(u[e.status]),children:e.status})]},t))}),(0,a.jsx)("button",{className:"mt-3 text-sm text-newcastle hover:text-accent font-medium",children:"+ Add Permit"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-charcoal uppercase tracking-wider mb-3",children:"Contractors & Ratings"}),(0,a.jsx)("div",{className:"space-y-3",children:e.contractors.map((t,s)=>(0,a.jsx)("div",{className:"p-4 bg-slate-light rounded-lg",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-charcoal",children:t.role}),!t.required&&(0,a.jsx)("span",{className:"text-xs text-charcoal-light",children:"(if needed)"}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full ".concat(m[t.status]),children:t.status.replace("_"," ")})]}),(0,a.jsx)("p",{className:"text-sm text-charcoal",children:t.company}),(0,a.jsxs)("p",{className:"text-sm text-charcoal-light",children:[t.contact," • ",(0,a.jsx)("a",{href:"tel:".concat(t.phone),className:"text-newcastle hover:text-accent",children:t.phone})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n,{rating:t.rating,readonly:!0}),("COMPLETED"===t.status||"DELIVERED"===t.status)&&(0,a.jsx)("button",{onClick:()=>o({phaseNum:e.num,contractorIdx:s,contractor:t}),className:"text-xs text-newcastle hover:text-accent font-medium",children:t.rating>0?"Edit":"Rate"})]}),t.review&&(0,a.jsxs)("p",{className:"text-xs text-charcoal-light italic max-w-sm text-right",children:['"',t.review,'"']})]})]})},s))}),(0,a.jsx)("button",{className:"mt-3 text-sm text-newcastle hover:text-accent font-medium",children:"+ Add Contractor"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-charcoal uppercase tracking-wider mb-3",children:"Newcastle Equipment Used"}),e.equipment.length>0?(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.equipment.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-slate-light rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-charcoal text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-charcoal-light",children:["ID: ",e.id]})]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-newcastle",children:[e.hours,"h"]})]},t))}):(0,a.jsx)("p",{className:"text-sm text-charcoal-light italic",children:"No Newcastle equipment logged for this phase"}),(0,a.jsx)("button",{className:"mt-3 text-sm text-newcastle hover:text-accent font-medium",children:"+ Log Equipment"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-charcoal uppercase tracking-wider mb-3",children:"Photos"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-3 border-2 border-dashed border-slate rounded-lg hover:border-newcastle hover:bg-newcastle-50 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-charcoal-light",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("span",{className:"text-sm text-charcoal-light",children:"Upload Photos"})]}),e.photos>0&&(0,a.jsxs)("button",{className:"text-sm text-newcastle hover:text-accent font-medium",children:["View ",e.photos," Photos"]})]})]})]})]},e.num)})}),l&&(0,a.jsx)(i,{contractor:l.contractor,onClose:()=>o(null),onSave:(e,t)=>{console.log("Saving review:",{phaseNum:l.phaseNum,contractorIdx:l.contractorIdx,rating:e,review:t}),o(null)}})]})}},622:function(e,t,s){"use strict";var a=s(2265),l=Symbol.for("react.element"),c=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,s){var a,c={},o=null,d=null;for(a in void 0!==s&&(o=""+s),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,a)&&!i.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===c[a]&&(c[a]=t[a]);return{$$typeof:l,type:e,key:o,ref:d,props:c,_owner:n.current}}t.Fragment=c,t.jsx=o,t.jsxs=o},7437:function(e,t,s){"use strict";e.exports=s(622)},1396:function(e,t,s){e.exports=s(5250)}},function(e){e.O(0,[250,971,938,744],function(){return e(e.s=9184)}),_N_E=e.O()}]);